<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kasargod Slang Translator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Manjari:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f7f4;
    }
    .malayalam {
      font-family: 'Manjari', sans-serif;
    }
    .kasargod-gradient {
      background: linear-gradient(to right, #10b981, #059669);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }
    #alertBox {
      transition: opacity 0.3s, transform 0.3s;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 bg-gray-100">

  <div class="w-full max-w-lg mx-auto">
    <header class="kasargod-gradient text-white p-6 rounded-t-xl shadow-lg text-center">
      <h1 class="text-3xl font-bold malayalam">‡¥ï‡¥æ‡¥∏‡µº‡¥ó‡µã‡¥°‡µç ‡¥∏‡µç‡¥≤‡¥æ‡¥ô‡µç ‡¥ü‡µç‡¥∞‡¥æ‡µª‡¥∏‡µç‡¥≤‡µá‡¥±‡µç‡¥±‡µº</h1>
      <p class="mt-2 text-lg">Kasargod Slang Translator</p>
    </header>

    <main class="bg-white p-6 rounded-b-xl shadow-lg">
      <div>
        <label for="inputText" class="block text-lg font-medium text-gray-700 malayalam">‡¥í‡¥∞‡µÅ ‡¥µ‡¥æ‡¥ö‡¥ï‡¥Ç ‡¥ü‡µà‡¥™‡µç‡¥™‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï</label>
        <textarea id="inputText" rows="4" class="mt-2 w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition malayalam" placeholder="‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥∏‡¥æ‡¥ß‡¥æ‡¥∞‡¥£ ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥ü‡µà‡¥™‡µç‡¥™‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï... ‡¥â‡¥¶‡¥æ: ‡¥®‡µÄ ‡¥é‡¥µ‡¥ø‡¥ü‡µÜ ‡¥™‡µã‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ"></textarea>
      </div>

      <div class="mt-6 text-center">
        <button id="translateBtn" class="kasargod-gradient text-white font-bold py-3 px-8 rounded-lg shadow-md hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
          <span class="malayalam text-xl">‡¥Æ‡¥æ‡¥±‡µç‡¥±‡¥ø‡¥ï‡µç‡¥ï‡µã!</span> (Translate!)
        </button>
      </div>

      <div id="resultContainer" class="mt-8 hidden">
        <div class="flex justify-between items-center">
          <h2 class="text-xl font-semibold text-gray-800 malayalam">‡¥ï‡¥æ‡¥∏‡µº‡¥ó‡µã‡¥°‡µç ‡¥∏‡µç‡¥±‡µç‡¥±‡µà‡µΩ:</h2>
          <button id="speakBtn" class="p-2 rounded-full hover:bg-green-100 transition-colors" title="Read aloud">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.88 14.12A2 2 0 014.12 12a2 2 0 011.76-1.88M12 12v.01M12 6l-3.5 3.5a2 2 0 000 2.83L12 16" />
            </svg>
          </button>
        </div>
        <div id="resultText" class="mt-2 p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg shadow-inner">
          <p class="text-lg text-gray-900 malayalam"></p>
        </div>
      </div>
      
      <div id="noSlangMessage" class="mt-6 text-center text-gray-500 hidden malayalam">
        ‡¥à ‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥ï‡¥≥‡¥ø‡¥≤‡µä‡¥®‡µç‡¥®‡µÅ‡¥Ç ‡¥ï‡¥æ‡¥∏‡µº‡¥ó‡µã‡¥°‡µç ‡¥ü‡¥ö‡µç‡¥ö‡¥ø‡¥≤‡µç‡¥≤‡¥≤‡µç‡¥≤‡µã!
      </div>
    </main>
    
    <footer class="text-center mt-6 text-sm text-gray-500">
      <p>Made with ‚ù§ in Kasargod</p>
    </footer>
  </div>

  <!-- Custom Alert Box for Errors -->
  <div id="alertBox" class="fixed top-5 right-5 bg-red-500 text-white p-4 rounded-lg shadow-lg opacity-0 transform -translate-y-10 max-w-sm hidden">
    <p id="alertMessage" class="text-sm mt-1"></p>
  </div>

  <script>
    const kasargodSlangDictionary = {
      "‡¥®‡µÄ": "‡¥á‡¥ú‡µç‡¥ú‡µç", "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ": "‡¥á‡¥ô‡µç‡¥ô‡¥≥‡µç", "‡¥û‡¥æ‡µª": "‡¥û‡¥æ‡¥®‡µç", "‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µç": "‡¥é‡¥®‡µç‡¥§‡¥™‡µç‡¥™", "‡¥é‡¥®‡µç‡¥§‡¥æ": "‡¥é‡¥®‡µç‡¥§‡¥™‡µç‡¥™",
      "‡¥é‡¥µ‡¥ø‡¥ü‡µÜ": "‡¥è‡¥ü‡µÜ", "‡¥Ö‡¥µ‡¥ø‡¥ü‡µÜ": "‡¥Ö‡¥ô‡µç‡¥ô‡µç", "‡¥á‡¥µ‡¥ø‡¥ü‡µÜ": "‡¥á‡¥ô‡µç‡¥ô‡µç", "‡¥µ‡¥∞‡µÅ‡¥®‡µç‡¥®‡µÅ": "‡¥¨‡¥∞‡µÅ‡¥®‡µç‡¥®‡µÅ", "‡¥µ‡¥∞‡¥æ‡¥Ç": "‡¥¨‡¥∞‡¥æ‡¥Ç",
      "‡¥µ‡¥®‡µç‡¥®‡µÅ": "‡¥¨‡¥®‡µç‡¥®‡µç", "‡¥™‡µã‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ": "‡¥™‡µã‡¥£‡µç", "‡¥™‡µã‡¥Ø‡¥ø": "‡¥™‡µã‡¥Ø‡¥ø‡¥®‡µç", "‡¥™‡µã‡¥ï‡¥æ‡¥Ç": "‡¥™‡µã‡¥µ‡¥æ‡¥Ç", "‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ": "‡¥Ü‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µç",
      "‡¥ï‡¥¥‡¥ø‡¥ö‡µç‡¥ö‡µÅ": "‡¥§‡¥ø‡¥®‡µç‡¥®‡µÅ", "‡¥ï‡¥¥‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç": "‡¥§‡¥ø‡¥®‡µç‡¥®‡¥æ‡¥Ç", "‡¥ö‡µá‡¥ü‡µç‡¥ü‡µª": "‡¥ï‡¥æ‡¥ï‡µç‡¥ï", "‡¥ö‡µá‡¥ü‡µç‡¥ü‡¥æ": "‡¥ï‡¥æ‡¥ï‡µç‡¥ï‡¥æ", "‡¥ö‡µá‡¥ö‡µç‡¥ö‡¥ø": "‡¥á‡¥§‡µç‡¥§‡¥æ‡¥§‡µç‡¥§",
      "‡¥∏‡µÅ‡¥π‡µÉ‡¥§‡µç‡¥§‡µç": "‡¥ö‡¥ô‡µç‡¥ô‡¥æ‡¥Ø‡¥ø", "‡¥ö‡¥ô‡µç‡¥ô‡¥æ‡¥§‡¥ø": "‡¥¨‡µÜ‡¥∏‡µç‡¥±‡µç‡¥±‡µç", "‡¥™‡µà‡¥∏": "‡¥ï‡¥æ‡¥∏‡µç", "‡¥®‡¥®‡µç‡¥®‡¥æ‡¥Ø‡¥ø‡¥ü‡µç‡¥ü‡µÅ‡¥£‡µç‡¥ü‡µç": "‡¥¨‡¥≤‡µç‡¥≤‡¥æ‡¥§‡µç‡¥§", "‡¥ï‡µä‡¥≥‡µç‡¥≥‡¥æ‡¥Ç": "‡¥â‡¥∑‡¥æ‡µº",
      "‡¥Ü‡¥£‡µç": "‡¥Ö‡¥§‡µç‡¥∞‡µÜ", "‡¥Ö‡¥≤‡µç‡¥≤‡µá": "‡¥Ö‡¥≤‡µç‡¥≤‡µá‡¥™‡µç‡¥™‡¥æ", "‡¥á‡¥≤‡µç‡¥≤": "‡¥á‡¥≤‡µç‡¥≤‡µÜ", "‡¥â‡¥£‡µç‡¥ü‡µç": "‡¥â‡¥£‡µç‡¥ü‡¥™‡µç‡¥™‡¥æ", "‡¥Ö‡¥µ‡µª": "‡¥ì‡µª",
      "‡¥Ö‡¥µ‡µæ": "‡¥ì‡¥≥‡µç", "‡¥Ö‡¥µ‡µº": "‡¥ì‡¥≤‡µç", "‡¥™‡¥±‡¥û‡µç‡¥û‡µÅ": "‡¥ö‡µä‡¥®‡µç‡¥®‡¥Ç", "‡¥é‡¥®‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥£‡µç": "‡¥é‡¥®‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥™‡µç‡¥™‡¥æ", "‡¥µ‡¥ø‡¥≥‡¥ø‡¥ö‡µç‡¥ö‡µÅ": "‡¥µ‡¥ø‡¥≥‡¥ø‡¥ö‡µç‡¥ö‡µç",
      "‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ": "‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ‡¥™‡µç‡¥™‡¥æ", "‡¥µ‡µá‡¥ó‡¥Ç": "‡¥¨‡µá‡¥Ç", "‡¥á‡¥∑‡µç‡¥ü‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ": "‡¥á‡¥∑‡µç‡¥ü‡¥æ‡¥Ø‡¥ø", "‡¥é‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µç": "‡¥é‡¥ü‡µç‡¥ï‡µç‡¥ï‡µç",
      "‡¥ï‡µä‡¥£‡µç‡¥ü‡µÅ‡¥µ‡¥æ": "‡¥ï‡µä‡¥£‡µç‡¥ü‡¥æ", "‡¥Ö‡¥Æ‡µç‡¥Æ": "‡¥â‡¥Æ‡µç‡¥Æ", "‡¥Ö‡¥ö‡µç‡¥õ‡µª": "‡¥¨‡¥æ‡¥™‡µç‡¥™", "‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥Ø‡¥ø‡¥≤‡µç‡¥≤": "‡¥ï‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤",
      "‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥Ø‡µã": "‡¥ï‡¥§‡µç‡¥§‡¥ø‡¥Ø‡µã", "‡¥∏‡¥§‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µã": "‡¥®‡µá‡¥∞‡¥æ‡¥£‡µã", "‡¥µ‡µÜ‡¥±‡µÅ‡¥§‡µÜ": "‡¥ö‡µÅ‡¥Æ‡µç‡¥Æ‡¥æ"
    };

    const inputText = document.getElementById('inputText');
    const translateBtn = document.getElementById('translateBtn');
    const resultContainer = document.getElementById('resultContainer');
    const resultText = document.getElementById('resultText').querySelector('p');
    const noSlangMessage = document.getElementById('noSlangMessage');
    const speakBtn = document.getElementById('speakBtn');
    const alertBox = document.getElementById('alertBox');
    const alertMessage = document.getElementById('alertMessage');

    translateBtn.addEventListener('click', () => {
      const originalText = inputText.value.trim();
      if (!originalText) return;

      resultContainer.classList.add('hidden');
      noSlangMessage.classList.add('hidden');

      const words = originalText.split(/(\s+)/);
      let slangFound = false;

      const translatedWords = words.map(word => {
        const punctuation = word.match(/[.,?!;:]*$/)[0] || '';
        const cleanWord = word.replace(/[.,?!;:]*$/, '');
        if (kasargodSlangDictionary[cleanWord]) {
          slangFound = true;
          return kasargodSlangDictionary[cleanWord] + punctuation;
        }
        return word;
      });

      const translatedSentence = translatedWords.join('');
      if (slangFound) {
        resultText.textContent = translatedSentence;
        resultContainer.classList.remove('hidden');
        resultContainer.classList.add('fade-in');

        // üîä Auto play TTS
        const encodedText = encodeURIComponent(translatedSentence);
        const ttsUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodedText}&tl=ml&client=tw-ob`;

        const audio = new Audio(ttsUrl);
        speakBtn.disabled = true;
        audio.play()
          .then(() => {
            audio.onended = () => {
              speakBtn.disabled = false;
            };
          })
          .catch(error => {
            console.error("Error playing audio:", error);
            speakBtn.disabled = false;
            showAlert("Could not play audio. Please check your internet connection.");
          });

      } else {
        noSlangMessage.classList.remove('hidden');
        noSlangMessage.classList.add('fade-in');
      }
    });

    speakBtn.addEventListener('click', () => {
      const textToSpeak = resultText.textContent;
      if (!textToSpeak) return;

      const encodedText = encodeURIComponent(textToSpeak);
      const ttsUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodedText}&tl=ml&client=tw-ob`;

      const audio = new Audio(ttsUrl);
      speakBtn.disabled = true;
      audio.play()
        .then(() => {
          audio.onended = () => {
            speakBtn.disabled = false;
          };
        })
        .catch(error => {
          console.error("Error playing audio:", error);
          speakBtn.disabled = false;
          showAlert("Could not play audio. Please check your internet connection.");
        });
    });

    function showAlert(message) {
      alertMessage.textContent = message;
      alertBox.classList.remove('hidden');
      setTimeout(() => {
        alertBox.classList.remove('opacity-0', '-translate-y-10');
      }, 10);
      setTimeout(() => {
        alertBox.classList.add('opacity-0', '-translate-y-10');
        setTimeout(() => alertBox.classList.add('hidden'), 300);
      }, 5000);
    }
  </script>
</body>
</html>
